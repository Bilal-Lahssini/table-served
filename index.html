<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pepe's Pizza </title>
  </head>

  <body>
    <div id="root"></div>
    <!-- Epson ePOS SDK - Use working CDN URLs -->
    <script>
      // Create mock objects for development/testing if SDKs fail to load
      function createMockSDK() {
        console.log('üîß Creating mock Epson SDK for testing...');
        
        window.ePosPrint = function() {
          return {
            addText: function(text) { console.log('Mock Print:', text); },
            addCut: function() { console.log('Mock: Paper cut'); },
            CUT_FEED: 1
          };
        };
        
        window.ePosDev = function() {
          return {
            connect: function(ip, port, callback) {
              console.log(`Mock: Connecting to ${ip}:${port}`);
              setTimeout(() => callback('OK'), 500);
            },
            send: function(printer, timeout, callback) {
              console.log('Mock: Sending to printer');
              setTimeout(() => callback({ success: true }), 1000);
            },
            disconnect: function() {
              console.log('Mock: Disconnected from printer');
            }
          };
        };
        
        window.epsonSDKReady = true;
        console.log('‚úÖ Mock Epson SDK ready');
      }

      // Try to load real SDKs, fallback to mock
      let scriptsLoaded = 0;
      let scriptsToLoad = 2;
      
      function checkAllLoaded() {
        scriptsLoaded++;
        if (scriptsLoaded >= scriptsToLoad) {
          setTimeout(function() {
            if (window.ePosPrint && window.ePosDev) {
              console.log('‚úÖ Real Epson ePOS SDK loaded successfully');
              window.epsonSDKReady = true;
            } else {
              console.log('‚ö†Ô∏è Real SDK failed, using mock SDK for testing');
              createMockSDK();
            }
          }, 100);
        }
      }
      
      // Load ePOS-Print
      var script1 = document.createElement('script');
      script1.src = 'https://cdnjs.cloudflare.com/ajax/libs/epson-epos-sdk/1.0.0/epos-print.js';
      script1.onload = function() {
        console.log('‚úÖ ePOS-Print loaded');
        checkAllLoaded();
      };
      script1.onerror = function() {
        console.log('‚ö†Ô∏è ePOS-Print failed to load from CDN');
        checkAllLoaded();
      };
      document.head.appendChild(script1);
      
      // Load ePOS-Device  
      var script2 = document.createElement('script');
      script2.src = 'https://cdnjs.cloudflare.com/ajax/libs/epson-epos-sdk/1.0.0/epos-device.js';
      script2.onload = function() {
        console.log('‚úÖ ePOS-Device loaded');
        checkAllLoaded();
      };
      script2.onerror = function() {
        console.log('‚ö†Ô∏è ePOS-Device failed to load from CDN');
        checkAllLoaded();
      };
      document.head.appendChild(script2);
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
